allprojects {
    apply plugin: 'java-library'
}

subprojects {

	if (project.name != 'kiekeradapter' && project.name != 'shared') {
		apply plugin: 'war'
		apply from: 'https://raw.github.com/gretty-gradle-plugin/gretty/master/pluginScripts/gretty.plugin'		
	}

	repositories {
		// Order of declaration determines how Gradle will check for dependencies at runtime. 
        jcenter()
        mavenCentral()
    }
    
    dependencies {
    
    	// SL4J
		implementation group: 'org.slf4j', name: 'slf4j-simple', version: '1.6.1'
        
        if (project.name != 'kiekeradapter') {
        	// exclude subprojects, which are not supposed to be a JAX-RS-based microservice        
        
        	// Jersey and Servlet
			implementation group: 'org.glassfish.jersey.containers', name: 'jersey-container-servlet', version:'2.27'
			implementation group: 'javax.servlet', name: 'javax.servlet-api', version:'3.0.1'
			implementation group: 'org.glassfish.jersey.inject', name: 'jersey-hk2', version:'2.27'
		  
		    // JSON + Parsing
		    implementation group: 'org.glassfish.jersey.media', name: 'jersey-media-json-jackson', version:'2.27'
		    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version:'2.9.6'
		    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version:'2.9.6'
		    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version:'2.9.6'
		    
		    // Jetty servlet-container
  			implementation group: 'org.glassfish.jersey.containers', name: 'jersey-container-jetty-servlet', version: '2.27'
    	}
    	
    	testImplementation 'junit:junit:4.12'
    }
    
}