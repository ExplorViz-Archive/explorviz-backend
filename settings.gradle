rootProject.name = 'explorviz-backend'

def loadProperties = {
    def properties = new Properties()
    file('src/main/webapp/WEB-INF/explorviz.properties').withInputStream {
        properties.load(it)
    }
    return properties
}

def extensionsFolder = loadProperties().extensionsFolder
def extensionPrefix = loadProperties().extensionPrefix



// include core logic
include 'explorviz-backend-core'
project(':explorviz-backend-core').projectDir = file('explorviz-backend-core')

//include 'explorviz-backend-extension-raccoon'
//project(':explorviz-backend-extension-raccoon').projectDir = file('explorviz-backend-extension-raccoon')


// include extensions
file(loadProperties().extensionsFolder).eachDir() { dir -> 
    if (dir.name.startsWith(extensionPrefix)) {
		include dir.name
	    project(':' + dir.name).projectDir = file(extensionsFolder + '/' + dir.name)
    }
}